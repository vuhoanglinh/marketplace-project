(function($) {
    $.fn.lavaLamp = function(o) {
        o = $.extend({ fx: "linear", speed: 500, click: function() { } }, o || {});
        return this.each(function() {
            var urldoc = new String(document.location);
            var indexactive = 0;
            if (urldoc.indexOf("he-thong") > 0) {
                indexactive = 6;
            }
            else if (urldoc.indexOf("gioi-thieu") > 0) {
                indexactive = 1;
            }
            else if (urldoc.indexOf("su-kien") > 0) {
                indexactive = 3;
            }
            else if (urldoc.indexOf("danh-gia") > 0) {
                indexactive = 4;
            }
            else if (urldoc.indexOf("lien-he") > 0) {
                indexactive = 5;
            }
            
            var b = $(this), noop = function() { },
$back = $('<li class="back"><div class="left"></div></li>').appendTo(b),
$li = $("li", this), curr = $("li.current", this)[0] || $($li[indexactive]).addClass("current")[0];
            $li.not(".back").hover(function() { move(this) }, noop);
            $(this).hover(noop, function() {
                move(curr)
            });
            $li.click(function(e) {
                setCurr(this); return o.click.apply(this, [e, this])
            });
            setCurr(curr);
            function setCurr(a) {
                $back.css({ "left": a.offsetLeft + "px", "width": a.offsetWidth + "px" });
                curr = a
            };
            function move(a) {
                $back.each(function() {
                    $(this).dequeue()
                }).animate({ width: a.offsetWidth, left: a.offsetLeft }, o.speed, o.fx)
            }
        })
    }
})(jQuery);